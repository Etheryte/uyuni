{
  "name": "spacewalk-web",
  "version": "1.0.0",
  "description": "Suse Manager web javascript source code",
  "license": "UNLICENSED",
  "dependencies": {
    "susemanager-nodejs-sdk-devel": "1.0.0"
  },
  "devDependencies": {
    "@khanacademy/flow-to-ts": "0.1.7",
    "@snowpack/app-scripts-react": "1.12.6",
    "@snowpack/plugin-react-refresh": "2.3.7",
    "@snowpack/plugin-typescript": "1.1.0",
    "@types/jquery": "3.2.0",
    "@types/react": "^16.8.6",
    "@types/react-dom": "^16.8.6",
    "@types/node": "14.14.10",
    "snowpack": "2.17.1",
    "typescript": "4.1.2",
    "5to6-codemod": "Etheryte/5to6-codemod#ecf5368"
  },
  "scripts": {
    "clean": "rm -rf node_modules && rm -rf dist",
    "dev": "webpack -d --config build/webpack.config.js --mode development",
    "watch": "webpack -d --config build/webpack.config.js --mode development --watch",
    "proxy": "webpack-dev-server -d --mode development --hot --inline --config build/webpack.config.js",
    "build": "node build",
    "build:novalidate": "BUILD_VALIDATION=false node build",
    "lint": "eslint . -f codeframe",
    "test": "BABEL_ENV=test jest",
    "test:watch": "BABEL_ENV=test jest --watch",
    "storybook": "start-storybook -s ./.storybook/public",
    "snow": "snowpack dev --polyfill-node",
    "tsc": "tsc",

    "find-js-jsx": "find components core manager utils -path ./node_modules -prune -false -o -path ./build -prune -false -o -name '*.js' -o -name '*.jsx'",
    "find-ts-tsx": "find components core manager utils -path ./node_modules -prune -false -o -path ./build -prune -false -o -name '*.ts' -o -name '*.tsx'",
    "find-require-module-exports": "yarn --silent find-js-jsx | xargs grep -l -e 'require(' -e 'module\\.exports'",

    "transform-cjs": "jscodeshift --parser=flow -t node_modules/5to6-codemod/transforms/cjs.js",
    "transform-exports": "jscodeshift --parser=flow -t node_modules/5to6-codemod/transforms/exports.js",
    "transform-named": "jscodeshift --parser=flow -t node_modules/5to6-codemod/transforms/named-export-generation.js",
    "migrate-cjs-to-es6": "TARGET_FILES=`yarn --silent find-require-module-exports`; yarn transform-cjs $TARGET_FILES; yarn transform-exports $TARGET_FILES; yarn transform-named $TARGET_FILES;",

    "find-flow": "yarn --silent find-js-jsx | xargs grep -l '@flow'",
    "flow-to-ts": "flow-to-ts --prettier --semi true --trailing-comma es5 --print-width 120 --write --delete-source",
    "migrate-flow": "yarn --silent find-flow | xargs yarn flow-to-ts",

    "tsc-grep-untyped-annotated": "(yarn --silent tsc 2>&1 || true) | tee | grep 'can only be used in TypeScript files'",
    "find-untyped-annotated": "yarn --silent tsc-grep-untyped-annotated | sed -e 's/\\.js.*/.js/' | uniq",
    "migrate-untyped-annotated": "yarn --silent find-untyped-annotated | xargs yarn flow-to-ts",

    "find-object-to-any": "yarn --silent find-ts-tsx | xargs grep -l ': Object[^\\.]'",
    "migrate-object-to-any": "yarn --silent find-object-to-any | xargs -I {} sed -i '' -e 's/: Object\\([^\\.]\\)/: any\\1/g' {}",

    "find-block-react": "yarn --silent find-ts-tsx | xargs grep -l 'const React = require(\"react\");'",
    "migrate-block-react": "yarn --silent find-block-react | xargs -I {} sed -i '' -e 's/const React = require(\"react\");/import * as React from \"react\";/g' {}",

    "find-untyped-use-state": "yarn --silent find-ts-tsx | xargs grep -l 'React.useState(undefined)'",
    "migrate-untyped-use-state": "yarn --silent find-untyped-use-state | xargs -I {} sed -i '' -e 's/React.useState(undefined)/React.useState<any>(undefined)/' {}"
  },
  "engines": {
    "node": ">=10.0.0",
    "yarn": ">=1.0.0"
  }
}
